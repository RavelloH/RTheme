openapi: 3.0.3
info:
  title: NeutralPress API
  description: NeutralPress CMS API 文档
  version: 1.0.0
servers:
  - url: http://localhost:3000
    description: 开发环境
paths:
  /api/posts:
    get:
      summary: 获取文章列表
      description: 分页获取文章列表，支持按发布状态筛选
      tags:
        - Posts
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: published
          in: query
          schema:
            type: boolean
      responses:
        "200":
          description: 成功返回文章列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostsListResponse"
  /api/users:
    get:
      summary: 获取用户列表
      tags:
        - Users
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: sortBy
          in: query
          schema:
            type: string
        - name: sortOrder
          in: query
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
      responses:
        "200":
          description: 成功返回用户列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UsersListResponse"
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        name:
          type: string
          minLength: 1
        role:
          type: string
          enum:
            - USER
            - ADMIN
            - EDITOR
        avatar:
          anyOf:
            - type: string
              format: uri
            - type: "null"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - email
        - name
        - role
        - avatar
        - createdAt
        - updatedAt
      additionalProperties: false
    CreateUser:
      type: object
      properties:
        email:
          type: string
          format: email
        name:
          type: string
          minLength: 1
        role:
          type: string
          enum:
            - USER
            - ADMIN
            - EDITOR
          default: USER
        avatar:
          type: string
          format: uri
      required:
        - email
        - name
      additionalProperties: false
    UpdateUser:
      type: object
      properties:
        email:
          type: string
          format: email
        name:
          type: string
          minLength: 1
        role:
          type: string
          enum:
            - USER
            - ADMIN
            - EDITOR
          default: USER
        avatar:
          type: string
          format: uri
      additionalProperties: false
    UsersListResponse:
      type: object
      properties:
        users:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              email:
                type: string
                format: email
              name:
                type: string
                minLength: 1
              role:
                type: string
                enum:
                  - USER
                  - ADMIN
                  - EDITOR
              avatar:
                anyOf:
                  - type: string
                    format: uri
                  - type: "null"
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - id
              - email
              - name
              - role
              - avatar
              - createdAt
              - updatedAt
            additionalProperties: false
        total:
          type: number
        page:
          type: number
        limit:
          type: number
      required:
        - users
        - total
        - page
        - limit
      additionalProperties: false
    Post:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        content:
          type: string
        excerpt:
          type:
            - string
            - "null"
        published:
          type: boolean
        authorId:
          type: string
          format: uuid
        categoryId:
          anyOf:
            - type: string
              format: uuid
            - type: "null"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - title
        - slug
        - content
        - excerpt
        - published
        - authorId
        - categoryId
        - createdAt
        - updatedAt
      additionalProperties: false
    CreatePost:
      type: object
      properties:
        title:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        content:
          type: string
        excerpt:
          type: string
        published:
          type: boolean
          default: false
        categoryId:
          type: string
          format: uuid
      required:
        - title
        - slug
        - content
      additionalProperties: false
    UpdatePost:
      type: object
      properties:
        title:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        content:
          type: string
        excerpt:
          type: string
        published:
          type: boolean
          default: false
        categoryId:
          type: string
          format: uuid
      additionalProperties: false
    PostsListResponse:
      type: object
      properties:
        posts:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              title:
                type: string
                minLength: 1
              slug:
                type: string
                minLength: 1
              content:
                type: string
              excerpt:
                type:
                  - string
                  - "null"
              published:
                type: boolean
              authorId:
                type: string
                format: uuid
              categoryId:
                anyOf:
                  - type: string
                    format: uuid
                  - type: "null"
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
            required:
              - id
              - title
              - slug
              - content
              - excerpt
              - published
              - authorId
              - categoryId
              - createdAt
              - updatedAt
            additionalProperties: false
        total:
          type: number
        page:
          type: number
        limit:
          type: number
      required:
        - posts
        - total
        - page
        - limit
      additionalProperties: false
    Category:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        description:
          type:
            - string
            - "null"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - name
        - slug
        - description
        - createdAt
        - updatedAt
      additionalProperties: false
    CreateCategory:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        description:
          type: string
      required:
        - name
        - slug
      additionalProperties: false
    UpdateCategory:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        slug:
          type: string
          minLength: 1
        description:
          type: string
      additionalProperties: false
    Tag:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - name
        - createdAt
        - updatedAt
      additionalProperties: false
    CreateTag:
      type: object
      properties:
        name:
          type: string
          minLength: 1
      required:
        - name
      additionalProperties: false
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data: {}
      required:
        - success
      additionalProperties: false
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          const: false
        message:
          type: string
        error:
          type: string
        statusCode:
          type: number
      required:
        - success
        - message
        - statusCode
      additionalProperties: false
    Pagination:
      type: object
      properties:
        page:
          type: number
          minimum: 1
          default: 1
        limit:
          type: number
          minimum: 1
          maximum: 100
          default: 10
        sortBy:
          type: string
        sortOrder:
          type: string
          enum:
            - asc
            - desc
          default: desc
      additionalProperties: false
